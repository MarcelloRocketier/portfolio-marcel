<section class="projectsSection" id="projects-desktop">
  <div class="projectsWrapper">
    <h1 id="projects-mobile" class="projectsTitle">{{ 'PROJECTS.TITLE' | translate }}</h1>

    <div class="projectTabs" role="tablist" aria-label="Projects tabs (desktop)">
      <button *ngFor="let project of projects; let i = index"
              type="button"
              (click)="setActiveProject(i)"
              [class.active]="i === activeProjectIndex"
              role="tab"
              [attr.id]="'project-tab-d-' + i"
              [attr.aria-selected]="i === activeProjectIndex ? 'true' : 'false'"
              [attr.tabindex]="i === activeProjectIndex ? 0 : -1"
              [attr.aria-controls]="'project-panel-' + i">
        {{ project.titleKey | translate }}
      </button>
    </div> 
    <div class="responsiveProjectTabs" role="tablist" aria-label="Projects tabs (mobile)">
      <button *ngFor="let r of responsiveProject; let i = index"
              type="button"
              (click)="setActiveProject(i)"
              [class.active]="i === activeProjectIndex"
              role="tab"
              [attr.id]="'project-tab-m-' + i"
              [attr.aria-selected]="i === activeProjectIndex ? 'true' : 'false'"
              [attr.tabindex]="i === activeProjectIndex ? 0 : -1"
              [attr.aria-controls]="'project-panel-' + i">
        {{ r.projectTitleKey | translate }}
      </button>
    </div>
    <div class="projectCard"
         [ngClass]="{ 'specialBorder': activeProjectIndex === 3 }"
         role="tabpanel"
         [attr.id]="'project-panel-' + activeProjectIndex"
         [attr.aria-labelledby]="'project-tab-d-' + activeProjectIndex + ' project-tab-m-' + activeProjectIndex"
         *ngIf="projects[activeProjectIndex] as project">
      <div class="responsiveContent">
        <h2>{{ project.titleKeyWO | translate }}</h2>
        <p class="responsiveUsedSkills">
          {{ project.usedSkillHeadline | translate }}:
          <span *ngFor="let skill of project.usedSkillNameKeys; let last = last">
            {{ skill | translate }}<span *ngIf="!last">, </span>
          </span>
        </p>
        <p class="responsiveDuration">{{ project.duration | translate }}</p>
        <div class="responsiveProjectImageWrapper">
          <img [src]="project.image" class="responsiveProjectImage" [alt]="project.titleKey | translate" loading="lazy" decoding="async" />
        </div>
        <ng-container *ngFor="let headlineKey of project.descriptionHeadlineKeys; let i = index">
          <h3><img class="miniShape" src="assets/img/otherSpecs/miniShape.svg" alt="" /> {{ headlineKey | translate }}
          </h3>
          <p class="responsiveDescription">
            {{ project.descriptionKeys[i] | translate }}
          </p>
        </ng-container>
        <div class="responsiveProjectLinks">
          <a *ngIf="project.link; else noLiveRight" [href]="project.link" target="_blank" rel="noopener noreferrer" class="buttonStyle live">
            Live Test
          </a>
          <ng-template #noLiveRight>
            <span class="buttonStyle placeholder">Kommt bald</span>
          </ng-template>
          <a *ngIf="project.repo; else noRepoRight" [href]="project.repo" target="_blank" rel="noopener noreferrer" class="buttonStyle github">
            GitHub
          </a>
          <ng-template #noRepoRight>
            <span class="buttonStyle placeholder">Noch nicht verfügbar</span>
          </ng-template>
        </div>
      </div>
      <div class="projectContentLeft">
        <div class="projectDescription">
          <ng-container *ngFor="let headlineKey of project.descriptionHeadlineKeys; let i = index">
            <h3>{{ headlineKey | translate }}</h3>
            <p>
              <img class="miniShape" src="assets/img/otherSpecs/miniShape.svg" alt="" />
              {{ project.descriptionKeys[i] | translate }}
            </p>
          </ng-container>
        </div>
      </div>
      <div class="projectContentRight">
        <h3>{{ project.usedSkillHeadline | translate }}</h3>
        <div class="projectSkills">
          <img *ngFor="let skill of project.usedSkillKeys; let i = index"
               [src]="skill | translate"
               [attr.alt]="project.usedSkillNameKeys[i] | translate"
               class="skillIcon" />
        </div>
        <img [src]="project.image" class="projectImage" [alt]="project.titleKey | translate" loading="lazy" decoding="async" />
        <div class="projectLinks">
          <a *ngIf="project.link; else noLiveRight" [href]="project.link" target="_blank" rel="noopener noreferrer" class="buttonStyle live">
            Live Test
          </a>
          <ng-template #noLiveRight>
            <span class="placeholder-link fullButton">Kommt bald</span>
          </ng-template>
          <a *ngIf="project.repo; else noRepoRight" [href]="project.repo" target="_blank" rel="noopener noreferrer" class="buttonStyle github">
            GitHub
          </a>
          <ng-template #noRepoRight>
            <span class="placeholder-link fullButton">Noch nicht verfügbar</span>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</section>